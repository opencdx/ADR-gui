{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8085","description":"Generated server url"}],"paths":{"/query":{"get":{"tags":["query-controller"],"operationId":"getQueryableData","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TinkarConceptModel"}}}}}}},"post":{"tags":["query-controller"],"operationId":"postQuery","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ADRQuery"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}}}}},"/query/save":{"post":{"tags":["query-controller"],"operationId":"saveQuery","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SavedQuery"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SavedQuery"}}}}}}},"/anf":{"post":{"tags":["anf-controller"],"operationId":"postANFStatement","requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"integer","format":"int64"}}}}}}},"/query/units":{"get":{"tags":["query-controller"],"operationId":"getUnits","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TinkarConceptModel"}}}}}}}},"/query/list":{"get":{"tags":["query-controller"],"operationId":"listQueries","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SavedQuery"}}}}}}}},"/query/{id}":{"delete":{"tags":["query-controller"],"operationId":"deleteQuery","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}}},"components":{"schemas":{"ADRQuery":{"type":"object","properties":{"unitOutput":{"type":"string","description":"Unit output for the system. This maybe IMPERIAL or METRIC or DEFAULT. All units that can be converted will be converted","enum":["IMPERIAL","METRIC","DEFAULT"]},"queries":{"type":"array","description":"The query that is be executed. It can be made up of multiple individual queries, combined with AND or OR","items":{"$ref":"#/components/schemas/Query"}}}},"Formula":{"type":"object","properties":{"name":{"type":"string","description":"The name of the formula, this will be used as the CSC Header."},"leftOperand":{"type":"string","description":"The left operand of the formula. Only one of leftOperand, leftOperandValue, or leftOperandFormula should be set.","format":"uuid"},"rightOperand":{"type":"string","description":"The right operand of the formula. Only one of rightOperand, rightOperandValue, or rightOperandFormula should be set.","format":"uuid"},"leftOperandValue":{"type":"number","description":"The value of the left operand in the formula. Only one of leftOperand, leftOperandValue, or leftOperandFormula should be set.","format":"double"},"rightOperandValue":{"type":"number","description":"The value of the right operand in the formula. Only one of rightOperand, rightOperandValue, or rightOperandFormula should be set.","format":"double"},"leftOperandFormula":{"$ref":"#/components/schemas/Formula"},"rightOperandFormula":{"$ref":"#/components/schemas/Formula"},"leftOperandUnit":{"type":"string","description":"The unit of measurement for the left operand in the formula.","format":"uuid"},"rightOperandUnit":{"type":"string","description":"The unit of measurement for the right operand in the formula.","format":"uuid"},"operation":{"type":"string","description":"The operation to be performed in the formula. Required.","enum":["MULTIPLY","DIVIDE","ADD","SUBTRACT","MODULO","POWER"]}},"description":"This class represents a mathematical formula for performing calculations. Only one of leftOperand, leftOperandValue, or leftOperandFormula should be set. Only one of rightOperand, rightOperandValue, or rightOperandFormula should be set. Operation is required."},"Query":{"type":"object","properties":{"conceptId":{"type":"string","description":"Tinkar Concept ID that will be queried.  Optional","format":"uuid"},"operation":{"type":"string","description":"The comparison operation to be performance on the value coming from the query.  Optional","enum":["GREATER_THAN","LESS_THAN","GREATER_THAN_OR_EQUAL","LESS_THAN_OR_EQUAL","EQUAL","NOT_EQUAL"]},"operationDouble":{"type":"number","description":"The value to be compared against the conceptId, if the value is to be compared against a number..  Optional","format":"double"},"operationUnit":{"type":"string","description":"The unit of the value to be compared against the conceptId, if the value is to be compared against a number.  Optional","format":"uuid"},"operationText":{"type":"string","description":"The value to be compared against the conceptId, if the value is to be compared against a string.  Optional"},"formula":{"$ref":"#/components/schemas/Formula"},"joinOperation":{"type":"string","description":"Indicates how queries should be applied AND / OR  order of operation is the given order of queries  Optional","enum":["OR","AND"]},"group":{"type":"array","description":"A group of queries that should be run together.  Optional","items":{"$ref":"#/components/schemas/Query"}}},"description":"A query object used for searching concepts.  Only one of these fields should be used at a time: formula, conceptId, group. Operation fields are used to compare the value of those fields against another value.  JoinOperation is used to bring together the multiple queries in an ADRQuery."},"SavedQuery":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"query":{"$ref":"#/components/schemas/ADRQuery"}}},"TinkarConceptModel":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"conceptId":{"type":"string","format":"uuid"},"conceptName":{"type":"string"},"conceptDescription":{"type":"string"}}}}}}